sudo: required #is required to use docker service in travis

language: python #can be any language, just php for example

services:
  - docker # required, but travis uses older version of docker :(

install:
  - echo "install nothing!" # put your normal pre-testing installs here

script:
  - echo "no tests!" # put your normal testing scripts here

env:
  global:
  - REGION=us-east-1
  - AWS_ECR_ACCOUNT=453101909370
  - AWS_ACCESS_KEY_ID=AKIAXJMXHJLOWZ2X5ZMJ
  - secure: "WMTVXbujiD6CVsxbfE1Amfjw5CJyknE8CoLawfdnFaumLAnaJTJ4wHz9lOyBKaKgXFkATDp1nbnsw2a8DSSyIH/3nBHewENS6Uf/CgH2tvy0EGlDQV1ybIe2tKEOGsBlidoB/uCM1SKPQgpgmJ+9mf1MVUB50+lGStidOhG8WtvI2pMvDeAPopbgKQNT7fm2OesHp42/w2XTLOYsz7OiVLF4snXxG9RGphYLl1EbgnFQnPKJzPq3j5z9ja7jlj/54Ozlu3IrmKs2Hnjz6jMkBgvJeMosY2ErAi7kHIa1T8TX9uITS7Z75kF7MSUp0BLLJ5HFglnGQj3p2GQDX98ATLtNQwAwL+iNSlpsoPx1sCJCmuvut/dFC+t4OyFhxzM00dfQsaML887CMWE4XhwUaDmsu5YXmj1K/x2/ydmZU4jlKwSzSdTxnI7cUDUYbPhforoRyYsPvs0x0UKsX+XCLwQCd6ufI738mr0rPQN2HUrNADhrwEiiGhYB7Ed2Pe3RTF1GGKKQ/sclzcblwMul1qRgDOeM/vOwJHuv/XztAVJLr3D3m1YOBr9vg8OzEwGh1AyDlID7KgdHHFxF+XrTZ8vm72Nw0mwnU74VseGjmKAxbEgF4tG4Asg/HSV1etgEnHSmscEQAbdJFgMPJQ/+Zy6iCgTMtMqgbNvp2zYiJVw="

after_success:
  - docker --version  # document the version travis is using
  - pip install --user awscli # install aws cli w/o sudo
  - export PATH=$PATH:$HOME/.local/bin # put aws in the path
  - eval $(aws ecr get-login --region us-east-1) #needs AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY envvars
  - docker build -t craigs .
  - docker tag craigs:latest 453101909370.dkr.ecr.us-east-1.amazonaws.com/craigs:latest
  - docker push 453101909370.dkr.ecr.us-east-1.amazonaws.com/craigs:latest